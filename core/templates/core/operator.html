{% extends "core/layout.html" %}
{% load static %}

{% block title %}Оператор{% endblock %}

{% block main %}
<h1>Конференция</h1>
<section class="row gy-3">
    <div class="col-md-4">
        <form id="add-speaker-form" class="mb-3">
            <input type="text" id="new-speaker-name" class="form-control mb-2" placeholder="ФИО" required>
            <input type="text" id="new-speaker-topic" class="form-control mb-2" placeholder="Тема" required>
            <input type="number" id="new-speaker-time" class="form-control mb-2" placeholder="Время (сек)" min="10" required>
            <button id="add-speaker-button" class="btn btn-primary w-100">Добавить докладчика</button>
        </form>

        <form id="time-control-form" class="mb-3">
            <input type="number" id="extra-time-input" class="form-control mb-2" placeholder="Доп. время (сек)" />
            <button id="add-time-button" class="btn btn-primary w-100">Добавить время</button>
        </form>

        <button id="toggle-conference-button" class="btn btn-success w-100">Запустить таймер</button>
    </div>

    <div class=" col-md-8">
        <div id="speaker-list" class="list-group list-group-numbered">
            <button type="button" class="list-group-item list-group-item-action {% if not current_speaker %}active{% endif %} no-number" data-id="" data-name="" data-time-limit="0">
                Не выбран
            </button>

            {% for speaker in speakers %}
            <button type="button" class="list-group-item list-group-item-action {% if speaker.id == current_speaker.id %}active{% endif %}" data-id="{{ speaker.id }}" data-name="{{ speaker.full_name }}" data-time-limit="{{ speaker.time_limit_seconds }}">
                <span class="speaker-name">{{ speaker.full_name }} —</span>
                <span class="speaker-topic">{{ speaker.topic }} —</span>
                <span class="speaker-time">{{ speaker.time_limit_formatted|default:"00:00" }}</span>
                <span class="delete-speaker float-end text-danger" style="cursor:pointer;">&times;</span>
            </button>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script type="module" src="{% static 'core/operator.js' %}"></script>
{% endblock %}